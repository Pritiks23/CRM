<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple CRM</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f7;
    margin: 0;
    padding: 0;
}
header {
    background: #0071e3;
    color: white;
    padding: 20px;
    text-align: center;
}
main {
    padding: 20px;
    max-width: 600px;
    margin: auto;
}
input, textarea {
    width: 100%;
    padding: 10px;
    margin: 5px 0 10px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
}
button {
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-right: 5px;
}
button.save { background: #0071e3; color: white; }
button.cancel { background: #aaa; color: white; }
button.delete { background: #e30000; color: white; }

.contact-item {
    padding: 10px;
    margin-bottom: 10px;
    background: #fff;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
</style>
</head>
<body>

<header>
    <h1>Simple CRM</h1>
</header>

<main>
    <div id="formDiv">
        <input type="text" id="name" placeholder="Full Name">
        <input type="email" id="email" placeholder="Email">
        <textarea id="notes" placeholder="Notes"></textarea>
        <button class="save" onclick="saveContact()">Save</button>
        <button class="cancel" onclick="resetForm()">Cancel</button>
    </div>

    <h2>Contacts</h2>
    <div id="contactsList"></div>
</main>

<script>
let editingIndex = null;

function loadContacts() {
    const contacts = JSON.parse(localStorage.getItem('contacts') || '[]');
    const list = document.getElementById('contactsList');
    list.innerHTML = '';
    contacts.forEach((c, i) => {
        const div = document.createElement('div');
        div.className = 'contact-item';
        div.innerHTML = `
            <div>
                <strong>${c.name}</strong><br>${c.email}<br>${c.notes || ''}
            </div>
            <div>
                <button onclick="editContact(${i})">Edit</button>
                <button class="delete" onclick="deleteContact(${i})">Delete</button>
            </div>
        `;
        list.appendChild(div);
    });
}

function saveContact() {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const notes = document.getElementById('notes').value.trim();

    if (!name || !email) { alert('Name and Email required'); return; }

    let contacts = JSON.parse(localStorage.getItem('contacts') || '[]');
    const contact = {name, email, notes};

    if (editingIndex !== null) {
        contacts[editingIndex] = contact;
    } else {
        contacts.push(contact);
    }

    localStorage.setItem('contacts', JSON.stringify(contacts));
    resetForm();
    loadContacts();
}

function editContact(index) {
    const contacts = JSON.parse(localStorage.getItem('contacts') || '[]');
    const contact = contacts[index];
    document.getElementById('name').value = contact.name;
    document.getElementById('email').value = contact.email;
    document.getElementById('notes').value = contact.notes;
    editingIndex = index;
}

function deleteContact(index) {
    let contacts = JSON.parse(localStorage.getItem('contacts') || '[]');
    contacts.splice(index, 1);
    localStorage.setItem('contacts', JSON.stringify(contacts));
    loadContacts();
}

function resetForm() {
    document.getElementById('name').value = '';
    document.getElementById('email').value = '';
    document.getElementById('notes').value = '';
    editingIndex = null;
}

// Initial load
loadContacts();
</script>

</body>
</html>
